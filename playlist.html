<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RoyalStar Music</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <style>
    /* --- Bottom Navigation --- */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(209, 209, 209, 0.356);
      backdrop-filter: blur(10px);
      border-top: 1px solid #b4b4b4;
      display: flex;
      justify-content: space-around;
      align-items: center;
      height: 60px;
      z-index: 1000;
    }
    .bottom-nav a {
      color: #aaa;
      text-decoration: none;
      font-size: 14px;
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: all 0.2s ease;
    }
    .bottom-nav a:hover,
    .bottom-nav a.active {
      color: #1db954;
      transform: scale(1.1);
    }
    .bottom-nav a i {
      font-size: 20px;
      margin-bottom: 4px;
    }

    /* --- Player Controls --- */
    .player-controls {
      position: fixed;
      bottom: 70px;
      width: 100%;
      background: rgba(209, 209, 209, 0.356);
      backdrop-filter: blur(10px);
      height: 70px;
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
      align-items: center;
      padding: 0 1rem;
      gap: 1rem;
      z-index: 999;
    }
    .song-info {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .song-info img {
      width: 50px;
      height: 50px;
      border-radius: 6px;
    }
    .song-info h3 {
      font-size: 0.9rem;
      margin: 0;
    }
    .song-info p {
      font-size: 0.7rem;
      margin: 0;
      color: #777;
    }
    .control-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    .control-buttons button {
      background: none;
      border: none;
      color: black;
      font-size: 20px;
      cursor: pointer;
    }
    .progress-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .progress-bar {
      flex: 1;
      background: #ddd;
      height: 5px;
      border-radius: 5px;
      position: relative;
      overflow: hidden;
    }
    .progress {
      background: linear-gradient(to right, #9333ea, #22c55e);
      height: 100%;
      width: 0%;
    }
    .volume-controls {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 5px;
    }

    /* --- Playlist & Songs Section --- */
    #playlist-section, #songs-section {
      margin: 80px 20px 100px;
    }
    .slider {
      display: flex;
      overflow-x: auto;
      gap: 20px;
      margin-top: 20px;
    }
    .playlist-card {
      width: 150px;
      background: #333;
      border-radius: 10px;
      overflow: hidden;
      cursor: pointer;
    }
    .playlist-card img {
      width: 100%;
      height: 120px;
      object-fit: cover;
    }
    .playlist-card h4 {
      padding: 10px;
      font-size: 16px;
      color: #fff;
    }

    .songs-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 20px;
    }
    .song-card {
      background: #222;
      border-radius: 10px;
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 10px;
      cursor: pointer;
      transition: 0.3s;
    }
    .song-card:hover {
      background: #333;
    }
    .song-card img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 8px;
    }
    .song-card h5 {
      font-size: 16px;
      color: #fff;
    }
    .song-card p {
      font-size: 12px;
      color: #bbb;
    }
  </style>
</head>
<body>
  <div class="player-controls" id="music-player" style="display: none;">
    <div class="song-info">
      <img src="https://via.placeholder.com/50" id="current-album-art">
      <div>
        <h3 id="current-song">No song playing</h3>
        <p id="current-artist">Unknown Artist</p>
      </div>
    </div>
    <div class="center-controls">
      <div class="control-buttons">
        <button id="shuffle"><i class="fas fa-random"></i></button>
        <button id="prev"><i class="fas fa-step-backward"></i></button>
        <button id="play-pause"><i class="fas fa-play"></i></button>
        <button id="next"><i class="fas fa-step-forward"></i></button>
        <button id="repeat"><i class="fas fa-redo"></i></button>
      </div>
      <div class="progress-controls">
        <span id="current-time">0:00</span>
        <div class="progress-bar"><div class="progress" id="progress"></div></div>
        <span id="total-time">0:00</span>
      </div>
    </div>
    <div class="volume-controls">
      <i class="fas fa-volume-up"></i>
      <input type="range" id="volume" min="0" max="100" value="100">
    </div>
  </div>

  <div id="library-page" style="display: none;">
    <section id="playlist-section">
      <h2>Playlists</h2>
      <div id="playlists" class="slider"></div>
    </section>
    <section id="songs-section" style="display: none;">
      <h2 id="songs-title"></h2>
      <div id="songs" class="songs-list"></div>
      <button id="backBtn">⬅️ Back to Playlists</button>
    </section>
  </div>

  <div class="bottom-nav">
    <a href="index.html" class="active" id="home-btn"><i class="fas fa-home"></i>Home</a>
    <a href="#search-input" id="search-btn"><i class="fas fa-search"></i>Search</a>
    <a href="active" id="library-btn"><i class="fas fa-music"></i>Library</a>
    <a href="#"><i class="fas fa-cog"></i>Settings</a>
  </div>

  <script>
    const audioPlayer = new Audio();
    let currentPlaylist = 0;
    let repeatMode = false;
    let shuffleMode = false;
    let currentSongIndex = 0;

    const playlists = [
      {
        name: "Royal Hits",
        image: "https://images.unsplash.com/photo-1492684223066-81342ee5ff30",
        songs: [
          { name: "On My Way", url: "https://res.cloudinary.com/dykzuljjr/video/upload/v1744977693/iSongs.info_01_-_Golden_Sparrow_josxui.mp3", image: "https://res.cloudinary.com/dykzuljjr/image/upload/v1744977760/images_6_homkdl.jpg" },
          { name: "Faded", url: "https://res.cloudinary.com/dkhbceri0/video/upload/v1743866982/Prema_Velluva_ruakii.mp3", image: "https://res.cloudinary.com/dl8dmkhmv/image/upload/v1743873184/download_10_mpnm7m.jpg" },
        ]
      },
      {
        name: "Star Vibes",
        image: "https://images.unsplash.com/photo-1470229722913-7c0e2dbbafd3",
        songs: [
          { name: "Alone", url: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3", image: "https://images.unsplash.com/photo-1497032628192-86f99bcd76bc" },
        ]
      }
    ];

    const playlistsDiv = document.getElementById('playlists');
    const songsDiv = document.getElementById('songs');
    const musicPlayer = document.getElementById('music-player');
    const currentSong = document.getElementById('current-song');
    const currentAlbumArt = document.getElementById('current-album-art');
    const songsSection = document.getElementById('songs-section');
    const playlistSection = document.getElementById('playlist-section');
    const playPauseBtn = document.getElementById('play-pause');

    function renderPlaylists() {
      playlistsDiv.innerHTML = '';
      playlists.forEach((pl, index) => {
        const card = document.createElement('div');
        card.className = 'playlist-card';
        card.innerHTML = `<img src="${pl.image}" alt=""><h4>${pl.name}</h4>`;
        card.onclick = () => openPlaylist(index);
        playlistsDiv.appendChild(card);
      });
    }

    function openPlaylist(index) {
      currentPlaylist = index;
      document.getElementById('songs-title').innerText = playlists[index].name;
      playlistSection.style.display = 'none';
      songsSection.style.display = 'block';
      renderSongs();
    }

    function renderSongs() {
      songsDiv.innerHTML = '';
      playlists[currentPlaylist].songs.forEach((song, i) => {
        const card = document.createElement('div');
        card.className = 'song-card';
        card.innerHTML = `<img src="${song.image}" alt=""><div><h5>${song.name}</h5><p>Unknown Artist</p></div>`;
        card.onclick = () => playSong(song, i);
        songsDiv.appendChild(card);
      });
    }

    function playSong(song, index) {
      currentSongIndex = index;
      audioPlayer.src = song.url;
      audioPlayer.play();
      musicPlayer.style.display = 'grid';
      currentSong.innerText = song.name;
      currentAlbumArt.src = song.image;
    }

    playPauseBtn.addEventListener('click', () => {
      if (audioPlayer.paused) {
        audioPlayer.play();
      } else {
        audioPlayer.pause();
      }
    });

    document.getElementById('repeat').addEventListener('click', () => {
      repeatMode = !repeatMode;
      audioPlayer.loop = repeatMode;
      alert("Repeat: " + (repeatMode ? "ON" : "OFF"));
    });

    document.getElementById('shuffle').addEventListener('click', () => {
      shuffleMode = !shuffleMode;
      alert("Shuffle: " + (shuffleMode ? "ON" : "OFF"));
    });

    document.getElementById('next').addEventListener('click', () => {
      nextSong();
    });

    function nextSong() {
      const songs = playlists[currentPlaylist].songs;
      let nextIndex = shuffleMode ? Math.floor(Math.random() * songs.length) : (currentSongIndex + 1) % songs.length;
      playSong(songs[nextIndex], nextIndex);
    }

    document.getElementById('prev').addEventListener('click', () => {
      const songs = playlists[currentPlaylist].songs;
      let prevIndex = (currentSongIndex - 1 + songs.length) % songs.length;
      playSong(songs[prevIndex], prevIndex);
    });

    const progress = document.getElementById('progress');
    const currentTimeEl = document.getElementById('current-time');
    const totalTimeEl = document.getElementById('total-time');

    audioPlayer.ontimeupdate = () => {
      const percent = (audioPlayer.currentTime / audioPlayer.duration) * 100;
      progress.style.width = `${percent}%`;
      currentTimeEl.textContent = formatTime(audioPlayer.currentTime);
    };

    audioPlayer.onloadedmetadata = () => {
      totalTimeEl.textContent = formatTime(audioPlayer.duration);
    };

    function formatTime(sec) {
      const minutes = Math.floor(sec / 60);
      const seconds = Math.floor(sec % 60).toString().padStart(2, '0');
      return `${minutes}:${seconds}`;
    }

    document.getElementById('library-btn').addEventListener('click', () => {
      document.getElementById('library-page').style.display = 'block';
    });
    document.getElementById('home-btn').addEventListener('click', () => {
      document.getElementById('library-page').style.display = 'none';
    });
    document.getElementById('backBtn').addEventListener('click', () => {
      songsSection.style.display = 'none';
      playlistSection.style.display = 'block';
    });

    renderPlaylists();
  </script>
</body>
</html>
